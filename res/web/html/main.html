<!DOCTYPE HTML>
<html>
    <head>
        <title>
            Pi Camera Controller
        </title>
        <link rel="stylesheet" href="/include/css/common.css">
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    </head>
    <body>
        <script type="text/javascript">
            function showStart() {
                if (document.getElementById("record_button").value == "Record") {
                    document.getElementById("record_button").value = "Cancel";
                    document.getElementById("start_settings_div").style.display = "inline-block";
                    document.getElementById("invalid_time_div").style.display = "none";
                } else {
                    document.getElementById("record_button").value = "Record";
                    document.getElementById("start_settings_div").style.display = "none";
                }
            }

            function startNow() {
                var time = document.getElementById("record_time").value;
                if (isNaN(time)) {
                    document.getElementById("invalid_time_div").style.display = "inline-flex";
                } else {
                    document.getElementById("record_button").value = "Record";
                    document.getElementById("start_settings_div").style.display = "none";
                    document.getElementById("record_start_div").style.display = "none";
                    document.getElementById("invalid_time_div").style.display = "none";

                    startRecording(time);
                }
            }
        </script>

        <div class="grid_main">
            <p class="warning_message" id="javascript_warning">
                This site requires javascript to work correctly.
            </p>
            <h1 class="grid_row" id="controller_version">
                Pi Camera Controller ???
            </h1>
            <div class="grid_row">
                <div class="grid_item">
                    Camera status:
                </div>
                <div class="grid_item" id="cam_status">
                    <div style="color: yellow">
                        unknown
                    </div>
                </div>
            </div>
            <div class="grid_row" id="record_start_div">
                <div class="grid_item">
                    <input type="button" id="record_button" value="Record" onclick="showStart()">
                </div>
                <div class="grid_item" id="start_settings_div" style="display: none">
                    <input type="button" value="Start" onclick="startNow()">
                    Record for: <input type="text" id="record_time" value="0">
                </div>
            </div>
            <div class="grid_row" id="invalid_time_div" style="display: none; color: red;">
                Please enter a number of seconds to record for, <br>
                or enter 0 to record until canceled.<br>
                <input type="button" value="Close" onclick="document.getElementById('invalid_time_div').style.display = 'none'">
            </div>
        </div>

        <script src="/include/js/common.js"></script>
        <script src="/include/js/status.js"></script>
        <script src="/include/js/commands.js"></script>
    </body>
</html>